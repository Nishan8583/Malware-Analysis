#include <stdio.h>
#include <windows.h>

int main() {
	unsigned char code[] ={ 0x89, 0xC8, 0x40, 0xC3 };
    void * dyncode = VirtualAlloc(NULL, 4096,
                                              MEM_COMMIT, PAGE_EXECUTE_READWRITE);
    memcpy(dyncode,(void *)code,sizeof(code)); 
	int (* fn)(int) = (int (*)(int))dyncode;
	printf("%d\n",fn(5));                                 
	    
    VirtualFree(dyncode,NULL,MEM_RELEASE); 
}
